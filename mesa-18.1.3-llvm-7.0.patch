diff -up mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/blend_jit.cpp.omv~ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/blend_jit.cpp
--- mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/blend_jit.cpp.omv~	2018-07-07 00:47:53.711069107 +0200
+++ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/blend_jit.cpp	2018-07-07 00:49:54.418073608 +0200
@@ -822,7 +822,6 @@ struct BlendJit : public Builder
         passes.add(createCFGSimplificationPass());
         passes.add(createEarlyCSEPass());
         passes.add(createInstructionCombiningPass());
-        passes.add(createInstructionSimplifierPass());
         passes.add(createConstantPropagationPass());
         passes.add(createSCCPPass());
         passes.add(createAggressiveDCEPass());
diff -up mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/fetch_jit.cpp.omv~ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/fetch_jit.cpp
--- mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/fetch_jit.cpp.omv~	2018-07-07 00:51:09.774076418 +0200
+++ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/fetch_jit.cpp	2018-07-07 00:51:16.786076680 +0200
@@ -268,7 +268,6 @@ Function* FetchJit::Create(const FETCH_C
     optPasses.add(createCFGSimplificationPass());
     optPasses.add(createEarlyCSEPass());
     optPasses.add(createInstructionCombiningPass());
-    optPasses.add(createInstructionSimplifierPass());
     optPasses.add(createConstantPropagationPass());
     optPasses.add(createSCCPPass());
     optPasses.add(createAggressiveDCEPass());
diff -up mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/functionpasses/lower_x86.cpp.omv~ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/functionpasses/lower_x86.cpp
--- mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/functionpasses/lower_x86.cpp.omv~	2018-07-07 00:55:09.807085369 +0200
+++ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/functionpasses/lower_x86.cpp	2018-07-07 00:57:38.594090918 +0200
@@ -77,7 +77,7 @@ namespace SwrJit
         {"meta.intrinsic.VCVTPS2PH",       Intrinsic::x86_vcvtps2ph_256},
         {"meta.intrinsic.VPTESTC",         Intrinsic::x86_avx_ptestc_256},
         {"meta.intrinsic.VPTESTZ",         Intrinsic::x86_avx_ptestz_256},
-        {"meta.intrinsic.VFMADDPS",        Intrinsic::x86_fma_vfmadd_ps_256},
+        {"meta.intrinsic.VFMADDPS",        Intrinsic::fma},
         {"meta.intrinsic.VPHADDD",         Intrinsic::x86_avx2_phadd_d},
         {"meta.intrinsic.PDEP32",          Intrinsic::x86_bmi_pdep_32},
         {"meta.intrinsic.RDTSC",           Intrinsic::x86_rdtsc},
diff -up mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/streamout_jit.cpp.omv~ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/streamout_jit.cpp
--- mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/streamout_jit.cpp.omv~	2018-07-07 00:51:01.733076119 +0200
+++ mesa-18.1.3/src/gallium/drivers/swr/rasterizer/jitter/streamout_jit.cpp	2018-07-07 00:51:05.330076253 +0200
@@ -308,7 +308,6 @@ struct StreamOutJit : public Builder
         passes.add(createCFGSimplificationPass());
         passes.add(createEarlyCSEPass());
         passes.add(createInstructionCombiningPass());
-        passes.add(createInstructionSimplifierPass());
         passes.add(createConstantPropagationPass());
         passes.add(createSCCPPass());
         passes.add(createAggressiveDCEPass());
